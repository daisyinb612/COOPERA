(function(){"use strict";var e={3758:function(e,a,t){var l=t(5130),n=t(6768);const o={id:"app"};function s(e,a,t,l,s,c){const i=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",o,[((0,n.uX)(),(0,n.Wv)(n.PR,null,[(0,n.bF)(i)],1024))])}var c={name:"App"},i=t(1241);const u=(0,i.A)(c,[["render",s]]);var d=u,r=t(5587),g=(t(4188),t(1387));function p(e,a,t,l,o,s){const c=(0,n.g2)("WebTitle"),i=(0,n.g2)("el-header"),u=(0,n.g2)("MenuGuide"),d=(0,n.g2)("el-aside"),r=(0,n.g2)("router-view"),g=(0,n.g2)("el-main"),p=(0,n.g2)("el-container");return(0,n.uX)(),(0,n.Wv)(p,{class:"full-height-container"},{default:(0,n.k6)((()=>[(0,n.bF)(i,{class:"custom-header"},{default:(0,n.k6)((()=>[(0,n.bF)(c)])),_:1}),(0,n.bF)(p,{class:"inner-container"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{width:"300px",class:"aside-menu"},{default:(0,n.k6)((()=>[(0,n.bF)(u)])),_:1}),(0,n.bF)(g,{class:"main-content"},{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)(n.PR,null,[(0,n.bF)(r)],1024))])),_:1})])),_:1})])),_:1})}var A=t(4232);const m={style:{display:"flex",background:"linear-gradient(162.86deg, #a1b0ff, #f472ff)"}},k={class:"right-bar"};function h(e,a,t,l,o,s){const c=(0,n.g2)("el-switch");return(0,n.uX)(),(0,n.CE)("div",m,[(0,n.Lk)("div",{class:(0,A.C4)(e.$style.title)},[(0,n.Lk)("div",{class:(0,A.C4)(e.$style.ellipseParent)},[(0,n.Lk)("div",{class:(0,A.C4)(e.$style.frameChild)},null,2),(0,n.Lk)("div",{class:(0,A.C4)(e.$style.coOpera)},"CO-OPERA",2)],2)],2),(0,n.Lk)("div",k,[(0,n.bF)(c,{modelValue:l.language,"onUpdate:modelValue":a[0]||(a[0]=e=>l.language=e),"inline-prompt":"",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"active-text":"ZH","active-value":"zh_CN","inactive-text":"EN","inactive-value":"en_US",onChange:l.change_language},null,8,["modelValue","onChange"])])])}var v=t(144),f=t(5931),C={name:"WebTitle",setup(){const e=(0,v.KR)(localStorage.lang||"zh_CN"),{t:a,locale:t}=(0,f.s9)();function l(){t.value=e.value,localStorage.setItem("lang",e.value),location.reload()}const o=(0,n.EW)((()=>t.value));return console.log(o.value),console.log(a("message.hello")),{language:e,change_language:l}}},_={"right-bar":"WebTitle_right-bar_GowEs",frameChild:"WebTitle_frameChild_qMW9A",coOpera:"WebTitle_coOpera_dup1b",ellipseParent:"WebTitle_ellipseParent_TKL47",title:"WebTitle_title_W6IIG"};const b={};b["$style"]=_;const E=(0,i.A)(C,[["render",h],["__cssModules",b]]);var I=E;function S(e,a,t,l,o,s){const c=(0,n.g2)("el-button"),i=(0,n.g2)("User"),u=(0,n.g2)("el-icon"),d=(0,n.g2)("edit"),r=(0,n.g2)("Location"),g=(0,n.g2)("Reading"),p=(0,n.g2)("el-row");return(0,n.uX)(),(0,n.Wv)(p,{class:(0,A.C4)(e.$style.menu)},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{class:(0,A.C4)(e.$style.menuInner)},[(0,n.bF)(c,{class:(0,A.C4)([e.$style.inputLoglineWrapper,e.isActive("/home/inputlogline")?e.$style.active:""]),onClick:a[0]||(a[0]=a=>e.goToPage("/home/inputlogline")),plain:""},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{class:(0,A.C4)(e.$style.inputLogline)},(0,A.v_)(this.$t("input")),3)])),_:1},8,["class"])],2),(0,n.Lk)("div",{class:(0,A.C4)(e.$style.menuChild)},[(0,n.Lk)("div",{class:(0,A.C4)(e.$style.frameParent)},[(0,n.bF)(c,{class:(0,A.C4)([e.$style.inputLoglineWrapper,e.isActive("/home/pageone")?e.$style.active:""]),onClick:a[1]||(a[1]=a=>e.goToPage("/home/pageone")),plain:""},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{class:(0,A.C4)(e.$style.frameGroup)},[(0,n.bF)(u,{class:(0,A.C4)(e.$style.icon)},{default:(0,n.k6)((()=>[(0,n.bF)(i)])),_:1},8,["class"]),(0,n.Lk)("div",{class:(0,A.C4)(e.$style.charater)},(0,A.v_)(this.$t("character")),3)],2)])),_:1},8,["class"]),(0,n.bF)(c,{class:(0,A.C4)([e.$style.inputLoglineWrapper,e.isActive("/home/pagetwo")?e.$style.active:""]),onClick:a[2]||(a[2]=a=>e.goToPage("/home/pagetwo")),plain:""},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{class:(0,A.C4)(e.$style.frameGroup)},[(0,n.bF)(u,{class:(0,A.C4)(e.$style.icon)},{default:(0,n.k6)((()=>[(0,n.bF)(d)])),_:1},8,["class"]),(0,n.Lk)("div",{class:(0,A.C4)(e.$style.charater)},(0,A.v_)(this.$t("plot")),3)],2)])),_:1},8,["class"]),(0,n.bF)(c,{class:(0,A.C4)([e.$style.inputLoglineWrapper,e.isActive("/home/pagethree")?e.$style.active:""]),onClick:a[3]||(a[3]=a=>e.goToPage("/home/pagethree")),plain:""},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{class:(0,A.C4)(e.$style.frameGroup)},[(0,n.bF)(u,{class:(0,A.C4)(e.$style.icon)},{default:(0,n.k6)((()=>[(0,n.bF)(r)])),_:1},8,["class"]),(0,n.Lk)("div",{class:(0,A.C4)(e.$style.charater)},(0,A.v_)(this.$t("scene")),3)],2)])),_:1},8,["class"]),(0,n.bF)(c,{class:(0,A.C4)([e.$style.inputLoglineWrapper,e.isActive("/home/pagefour")?e.$style.active:""]),onClick:a[4]||(a[4]=a=>e.goToPage("/home/pagefour")),plain:""},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{class:(0,A.C4)(e.$style.frameGroup)},[(0,n.bF)(u,{class:(0,A.C4)(e.$style.icon)},{default:(0,n.k6)((()=>[(0,n.bF)(g)])),_:1},8,["class"]),(0,n.Lk)("div",{class:(0,A.C4)(e.$style.charater)},(0,A.v_)(this.$t("dialogue")),3)],2)])),_:1},8,["class"])],2)],2),(0,n.Lk)("div",{class:(0,A.C4)(e.$style.menuInner)},[(0,n.bF)(c,{class:(0,A.C4)([e.$style.inputLoglineWrapper,e.isActive("/home/renderscript")?e.$style.active:""]),onClick:a[5]||(a[5]=a=>e.goToPage("/home/renderscript")),plain:""},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{class:(0,A.C4)(e.$style.inputLogline)},(0,A.v_)(this.$t("output")),3)])),_:1},8,["class"])],2)])),_:1},8,["class"])}t(4114);var y=t(7477),J=(0,n.pM)({name:"MenuGuide",components:{Edit:y.Edit},setup(){const e=(0,g.rd)(),a=(0,g.lq)(),t=a=>{e.push(a)},l=e=>a.path===e;return{goToPage:t,isActive:l}}}),w={menu:"MenuGuide_menu_JZcuV",inputLogline:"MenuGuide_inputLogline_V0xNv",inputLoglineWrapper:"MenuGuide_inputLoglineWrapper_Lm55H",active:"MenuGuide_active_dRebr",menuInner:"MenuGuide_menuInner_Uk1Hl",frameChild:"MenuGuide_frameChild_Ym36g",charater:"MenuGuide_charater_gwg8i",frameGroup:"MenuGuide_frameGroup_lAKJT",frameParent:"MenuGuide_frameParent_ZKcIb",menuChild:"MenuGuide_menuChild_gGMwj",content:"MenuGuide_content_d_DTl"};const Q={};Q["$style"]=w;const F=(0,i.A)(J,[["render",S],["__cssModules",Q]]);var B=F,D={name:"HomePage",components:{WebTitle:I,MenuGuide:B}};const P=(0,i.A)(D,[["render",p],["__scopeId","data-v-057262ca"]]);var M=P;const V=e=>((0,n.Qi)("data-v-20a267bc"),e=e(),(0,n.jt)(),e),L={class:"chat"},$={class:"asset-name"},W={class:"human-iutput-container"},T={class:"human-iutput"},G=V((()=>(0,n.Lk)("br",null,null,-1))),K=["innerHTML"],x=["src"];function X(e,a,o,s,c,i){const u=(0,n.g2)("el-header"),d=(0,n.g2)("el-input"),r=(0,n.g2)("el-scrollbar"),g=(0,n.g2)("el-main"),p=(0,n.g2)("el-button"),m=(0,n.g2)("el-footer"),k=(0,n.g2)("el-col"),h=(0,n.g2)("el-row"),v=(0,n.g2)("el-avatar"),f=(0,n.g2)("el-container"),C=(0,n.gN)("loading");return(0,n.uX)(),(0,n.Wv)(f,{class:"main-container"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{class:"up-panel"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"header"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,(0,A.v_)(this.$t("SCRIPT_OUTLINE")),1)])),_:1}),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(g,{class:"editlogline"},{default:(0,n.k6)((()=>[(0,n.bF)(r,null,{default:(0,n.k6)((()=>[(0,n.bF)(d,{modelValue:e.loglineData,"onUpdate:modelValue":a[0]||(a[0]=a=>e.loglineData=a),rows:3,autosize:"",type:"textarea",placeholder:e.$t("log_placehoder")},null,8,["modelValue","placeholder"])])),_:1})])),_:1})),[[C,e.loading]]),(0,n.bF)(m,{class:"button-container"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{class:"upload-button",onClick:e.FreshBackend},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("fresh")),1)])),_:1},8,["onClick"]),(0,n.bF)(p,{class:"upload-button",onClick:e.UploadLogLine},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("upload")),1)])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,n.bF)(m,{class:"down-panel"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",L,[(0,n.bF)(u,{class:"header"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",$,(0,A.v_)(this.$t("Logline_AI")),1)])),_:1}),(0,n.bF)(g,null,{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.messages,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{class:"message",key:a},[(0,n.bF)(h,{gutter:5,align:"middle"},{default:(0,n.k6)((()=>[(0,n.bF)(k,{span:e.prompt.length>35?0:24-e.prompt.length},null,8,["span"]),(0,n.bF)(k,{span:e.prompt.length>35?24:e.prompt.length},{default:(0,n.k6)((()=>[(0,n.Lk)("div",W,[(0,n.Lk)("div",T,(0,A.v_)(e.prompt),1)])])),_:2},1032,["span"])])),_:2},1024),G,(0,n.bF)(h,{align:"middle"},{default:(0,n.k6)((()=>[(0,n.bF)(k,{span:2},{default:(0,n.k6)((()=>[(0,n.bF)(v,{src:t(2723),class:"llm"},null,8,["src"])])),_:1}),(0,n.bF)(k,{span:22},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{class:"AI-output",innerHTML:e.content},null,8,K)])),_:2},1024)])),_:2},1024)])))),128))])),_:1}),(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.bF)(d,{placeholder:e.$t("AI_input"),modelValue:e.inputMessage,"onUpdate:modelValue":a[1]||(a[1]=a=>e.inputMessage=a),onKeyup:(0,l.jR)(e.sendMessage,["enter"]),clearable:""},{append:(0,n.k6)((()=>[(0,n.bF)(p,{onClick:e.sendMessage},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{class:"upload-image",src:t(2456)},null,8,x)])),_:1},8,["onClick"])])),_:1},8,["placeholder","modelValue","onKeyup"])])),_:1})])])),_:1})])),_:1})}var N=t(782),U=t(1219),R=t(4373),Z=(0,n.pM)({name:"LogLine",computed:{...(0,N.aH)({loglineData:e=>e.logline.loglineData})},methods:{...(0,N.i0)(["updateLoglineData"]),async sendMessage(){if(!this.inputMessage)return void(0,U.nk)({message:"输入不能为空",type:"warning"});const e={role:"user",content:this.inputMessage};this.history.push(e);const a={action:"get_storyline_help",data:{storyline:this.loglineData,history:this.history.map((e=>({role:e.role,content:e.content}))),user_input:this.inputMessage}},t={role:"assistant",prompt:this.inputMessage,content:"loading...",image:"logo.png",downloadIcon:!0};this.messages.push(t);try{console.log("Sending request...");const e=await R.A.post("/api/get_storyline_help",a);if(console.log("Request successful"),200===e.status){const a={role:"assistant",prompt:this.inputMessage,content:e.data.answer,image:"test_asset.png",downloadIcon:!0};this.messages.splice(this.messages.length-1,1,a),this.history.push(a),this.inputMessage=""}else(0,U.nk)({message:"请求失败",type:"error"})}catch(l){console.log("Request failed:",l),"ECONNABORTED"===l.code?(0,U.nk)({message:"请求超时",type:"error"}):(0,U.nk)({message:"请求失败",type:"error"})}},async FreshBackend(){const e=await R.A.get("/api/fresh_backend");return!0===e.data.result?void(0,U.nk)({message:"刷新成功，文件名："+e.data.filename,type:"success"}):void(0,U.nk)({message:"刷新失败",type:"error"})},async UploadLogLine(){if(this.loading=!0,!this.loglineData)return void(0,U.nk)({message:"输入不能为空",type:"warning"});const e={action:"upload_storyline",data:{storyline:this.loglineData}};try{const a=await R.A.post("/api/upload_storyline",e);this.$store.dispatch("addCharacter",a.data),200===a.status?(this.loading=!1,(0,U.nk)({message:"保存成功",type:"success"})):(0,U.nk)({message:"保存失败",type:"error"})}catch(a){"ECONNABORTED"===a.code?(0,U.nk)({message:"请求超时",type:"error"}):(0,U.nk)({message:"请求失败",type:"error"})}}},setup(){const e=(0,N.Pj)(),a=(0,v.KR)(""),t=(0,v.KR)([{role:"assistant",prompt:"",content:"你好，我是帮助你创作故事概要的智能助手.\n                你可以尝试问我以下问题:<br>\n                在写故事概要的时候要注意哪些方面？<br>\n                要如何用两三句话总结故事？",image:"logo.png",downloadIcon:!0}]),l=(0,v.KR)(!1),o=(0,v.KR)([]),s=(0,n.EW)({get:()=>e.getters.loglineData,set:a=>e.dispatch("updateLoglineData",a)});return console.log(e),{inputMessage:a,messages:t,loading:l,history:o,loglineData:s,onMounted:n.sV}}});const O=(0,i.A)(Z,[["render",X],["__scopeId","data-v-20a267bc"]]);var Y=O;function j(e,a,t,l,o,s){const c=(0,n.g2)("GCharacter");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(c)])}const H=e=>((0,n.Qi)("data-v-57de495c"),e=e(),(0,n.jt)(),e),q={class:"art-asset"},z=["src"],ee=["src"],ae={class:"chat"},te={key:0,class:"human-iutput"},le=H((()=>(0,n.Lk)("br",null,null,-1))),ne=["innerHTML"],oe=["src"],se=H((()=>(0,n.Lk)("i",{class:"el-icon-plus"},null,-1))),ce=H((()=>(0,n.Lk)("i",{class:"el-icon-plus"},null,-1))),ie=H((()=>(0,n.Lk)("div",null,"Are you sure to remove the character?",-1))),ue={class:"dialog-footer"};function de(e,a,o,s,c,i){const u=(0,n.g2)("el-header"),d=(0,n.g2)("el-col"),r=(0,n.g2)("el-row"),g=(0,n.g2)("el-card"),p=(0,n.g2)("el-scrollbar"),m=(0,n.g2)("el-button"),k=(0,n.g2)("el-footer"),h=(0,n.g2)("el-container"),v=(0,n.g2)("el-avatar"),f=(0,n.g2)("el-main"),C=(0,n.g2)("el-input"),_=(0,n.g2)("el-aside"),b=(0,n.g2)("el-form-item"),E=(0,n.g2)("el-option"),I=(0,n.g2)("el-select"),S=(0,n.g2)("el-upload"),y=(0,n.g2)("el-form"),J=(0,n.g2)("el-dialog"),w=(0,n.gN)("loading");return(0,n.uX)(),(0,n.Wv)(h,{class:"main-container"},{default:(0,n.k6)((()=>[(0,n.bF)(h,{class:"character_panel"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"art-asset-header"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",q,(0,A.v_)(this.$t("characters")),1)])),_:1}),(0,n.bF)(h,{class:"rightcontainer"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{class:"assets-list"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.charList,((a,l)=>((0,n.uX)(),(0,n.Wv)(g,{key:l,class:"asset-item",shadow:"hover",onClick:a=>e.editAsset(l)},{default:(0,n.k6)((()=>[(0,n.bF)(r,{gutter:10,style:{width:"100%"},align:"middle"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{span:4,style:{"text-align":"center"}},{default:(0,n.k6)((()=>[a.image?((0,n.uX)(),(0,n.CE)("img",{key:0,class:"asset-image",src:a.image},null,8,z)):((0,n.uX)(),(0,n.CE)("img",{key:1,class:"asset-image",src:t(5512)},null,8,ee))])),_:2},1024),(0,n.bF)(d,{span:20},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,(0,A.v_)(a.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),(0,n.bF)(k,{class:"add-button-container"},{default:(0,n.k6)((()=>[(0,n.bF)(m,{class:"addasset-button",onClick:e.showAddDialog},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("cha_add")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,n.bF)(_,{class:"chatgpt_panel"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",ae,[(0,n.bF)(u,{class:"header"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,(0,A.v_)(this.$t("cha_AI")),1)])),_:1}),(0,n.bF)(f,null,{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.messages,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{class:"message",key:a},[(0,n.bF)(r,{gutter:5,align:"middle"},{default:(0,n.k6)((()=>[e.prompt?((0,n.uX)(),(0,n.CE)("div",te,(0,A.v_)(e.prompt),1)):(0,n.Q3)("",!0)])),_:2},1024),le,(0,n.bF)(r,{align:"top"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{span:4},{default:(0,n.k6)((()=>[(0,n.bF)(v,{src:t(2723),class:"llm"},null,8,["src"])])),_:1}),(0,n.bF)(d,{span:20},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{class:"AI-output",innerHTML:e.content},null,8,ne)])),_:2},1024)])),_:2},1024)])))),128))])),_:1}),(0,n.bF)(k,null,{default:(0,n.k6)((()=>[(0,n.bF)(C,{placeholder:e.$t("AI_input"),modelValue:e.inputMessage,"onUpdate:modelValue":a[0]||(a[0]=a=>e.inputMessage=a),class:"input-field",onKeyup:(0,l.jR)(e.sendMessage,["enter"]),clearable:""},{append:(0,n.k6)((()=>[(0,n.bF)(m,{onClick:e.sendMessage},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{class:"upload-image",src:t(2456)},null,8,oe)])),_:1},8,["onClick"])])),_:1},8,["placeholder","modelValue","onKeyup"])])),_:1})])])),_:1}),(0,n.bF)(J,{title:e.$t("cha_add"),modelValue:e.addDialogVisible,"onUpdate:modelValue":a[5]||(a[5]=a=>e.addDialogVisible=a),"custom-class":"dialog-content"},{default:(0,n.k6)((()=>[(0,n.bF)(y,{model:e.newAsset,"label-width":"100px",class:"add-asset-form"},{default:(0,n.k6)((()=>[(0,n.bF)(b,{label:this.$t("C_name"),"label-width":e.formLabelWidth},{default:(0,n.k6)((()=>[(0,n.bF)(C,{modelValue:e.newAsset.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.newAsset.name=a),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label","label-width"]),"characters"===e.newAsset.group?((0,n.uX)(),(0,n.Wv)(b,{key:0,label:this.$t("C_de"),"label-width":e.formLabelWidth},{default:(0,n.k6)((()=>[(0,n.bF)(C,{modelValue:e.newAsset.content,"onUpdate:modelValue":a[2]||(a[2]=a=>e.newAsset.content=a),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label","label-width"])):(0,n.Q3)("",!0),(0,n.bF)(b,{label:this.$t("C_voice")},{default:(0,n.k6)((()=>[(0,n.bF)(I,{modelValue:e.newAsset.per,"onUpdate:modelValue":a[3]||(a[3]=a=>e.newAsset.per=a),placeholder:this.$t("voice")},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.audios,(e=>((0,n.uX)(),(0,n.Wv)(E,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),"characters"===e.newAsset.group?((0,n.uX)(),(0,n.Wv)(b,{key:1,label:this.$t("C_p"),"label-width":e.formLabelWidth},{default:(0,n.k6)((()=>[(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(S,{"http-request":e.uploadFile,"list-type":"picture-card","on-success":e.handleUploadSuccess,"file-list":e.fileList,"onUpdate:fileList":a[4]||(a[4]=a=>e.fileList=a),"on-remove":e.handleRemove,"on-preview":e.handlePictureCardPreview,"on-exceed":e.handleExceed},{default:(0,n.k6)((()=>[se])),_:1},8,["http-request","on-success","file-list","on-remove","on-preview","on-exceed"]),(0,n.bF)(m,{onClick:e.generate_new_image,class:"confirm-button"},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("C_Genp")),1)])),_:1},8,["onClick"])])),[[w,e.loading]])])),_:1},8,["label","label-width"])):(0,n.Q3)("",!0),(0,n.bF)(k,{class:"dialog-footer"},{default:(0,n.k6)((()=>[(0,n.bF)(m,{onClick:e.handleAddDialogClose,class:"cancel-button"},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("cancel")),1)])),_:1},8,["onClick"]),(0,n.bF)(m,{type:"primary",onClick:e.addNewAsset,class:"confirm-button"},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("confirm")),1)])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","modelValue"]),(0,n.bF)(J,{title:"保存 "+e.curSaveType,modelValue:e.showSaveDialog,"onUpdate:modelValue":a[10]||(a[10]=a=>e.showSaveDialog=a),"custom-class":"dialog-content"},{default:(0,n.k6)((()=>[(0,n.bF)(b,{label:"类型"},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(e.curSaveType),1)])),_:1}),(0,n.bF)(b,{label:"分组"},{default:(0,n.k6)((()=>[(0,n.bF)(I,{modelValue:e.newAsset.group,"onUpdate:modelValue":a[6]||(a[6]=a=>e.newAsset.group=a),placeholder:"选择分组",onChange:e.changeGroup},{default:(0,n.k6)((()=>[(0,n.bF)(E,{label:"角色",value:"characters"})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,n.bF)(b,{label:"资产名","label-width":e.formLabelWidth},{default:(0,n.k6)((()=>[e.newAsset.group?((0,n.uX)(),(0,n.Wv)(I,{key:0,modelValue:e.newAsset.name,"onUpdate:modelValue":a[7]||(a[7]=a=>e.newAsset.name=a),placeholder:"选择名字"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.curGroup,((e,a)=>((0,n.uX)(),(0,n.Wv)(E,{key:a,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(0,n.Q3)("",!0),(0,n.bF)(C,{modelValue:e.newAsset.name,"onUpdate:modelValue":a[8]||(a[8]=a=>e.newAsset.name=a),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,n.bF)(k,{class:"dialog-footer"},{default:(0,n.k6)((()=>[(0,n.bF)(m,{onClick:e.handleSaveClose,class:"cancel-button"},{default:(0,n.k6)((()=>[(0,n.eW)("取消")])),_:1},8,["onClick"]),(0,n.bF)(m,{type:"primary",onClick:a[9]||(a[9]=a=>e.saveAssetConfirm(e.newAsset.group,e.newAsset.name)),class:"confirm-button"},{default:(0,n.k6)((()=>[(0,n.eW)("确认")])),_:1})])),_:1})])),_:1},8,["title","modelValue"]),(0,n.bF)(J,{title:e.$t("cha_edit"),modelValue:e.showEditDialog,"onUpdate:modelValue":a[15]||(a[15]=a=>e.showEditDialog=a),"custom-class":"dialog-content"},{default:(0,n.k6)((()=>[(0,n.bF)(b,{label:this.$t("C_name"),"label-width":e.formLabelWidth},{default:(0,n.k6)((()=>[(0,n.bF)(C,{modelValue:e.currentEditAsset.name,"onUpdate:modelValue":a[11]||(a[11]=a=>e.currentEditAsset.name=a),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label","label-width"]),(0,n.bF)(b,{label:this.$t("C_di"),"label-width":e.formLabelWidth},{default:(0,n.k6)((()=>[(0,n.bF)(C,{modelValue:e.currentEditAsset.content,"onUpdate:modelValue":a[12]||(a[12]=a=>e.currentEditAsset.content=a),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label","label-width"]),(0,n.bF)(b,{label:this.$t("C_voice")},{default:(0,n.k6)((()=>[(0,n.bF)(I,{modelValue:e.currentEditAsset.per,"onUpdate:modelValue":a[13]||(a[13]=a=>e.currentEditAsset.per=a),placeholder:"choose voice"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.audios,(e=>((0,n.uX)(),(0,n.Wv)(E,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,n.bF)(b,{label:this.$t("C_p"),"label-width":e.formLabelWidth},{default:(0,n.k6)((()=>[(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(S,{"http-request":e.uploadFile,"list-type":"picture-card","on-success":e.handleUploadSuccess,"file-list":e.fileList,"show-file-list":"true","on-remove":e.handleEditRemove,"on-exceed":e.handleExceed},{default:(0,n.k6)((()=>[ce])),_:1},8,["http-request","on-success","file-list","on-remove","on-exceed"]),(0,n.bF)(m,{onClick:e.generate_image,class:"confirm-button"},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("C_Genp")),1)])),_:1},8,["onClick"])])),[[w,e.loading]])])),_:1},8,["label","label-width"]),(0,n.bF)(k,{class:"dialog-footer"},{default:(0,n.k6)((()=>[(0,n.bF)(m,{onClick:e.handleEditClose,class:"cancel-button"},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("cancel")),1)])),_:1},8,["onClick"]),(0,n.bF)(m,{type:"danger",onClick:e.showDeleteDialog,class:"delete-button"},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("delete")),1)])),_:1},8,["onClick"]),(0,n.bF)(m,{type:"primary",onClick:e.saveEditedAsset,class:"confirm-button"},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("confirm")),1)])),_:1},8,["onClick"])])),_:1}),(0,n.bF)(J,{modelValue:e.showDeleteConfirm,"onUpdate:modelValue":a[14]||(a[14]=a=>e.showDeleteConfirm=a)},{default:(0,n.k6)((()=>[ie,(0,n.Lk)("span",ue,[(0,n.bF)(m,{onClick:e.cancelDelete,class:"cancel-button"},{default:(0,n.k6)((()=>[(0,n.eW)("Cancel")])),_:1},8,["onClick"]),(0,n.bF)(m,{type:"danger",onClick:e.confirmDelete,class:"confirm-button"},{default:(0,n.k6)((()=>[(0,n.eW)("Confirm")])),_:1},8,["onClick"])])])),_:1},8,["modelValue"])])),_:1},8,["title","modelValue"])])),_:1})}var re=t(8837),ge=(0,n.pM)({name:"GCharacter",setup(){const{proxy:e}=(0,n.nI)(),a=(0,v.KR)(!1),t=(0,v.KR)(!1),l=(0,v.KR)(!1),o=(0,v.KR)(""),s=(0,v.KR)(""),c=(0,v.KR)(!1),i=(0,v.KR)(""),u=(0,v.KR)([]),d=(0,v.KR)(""),r=(0,v.KR)("characters"),g=(0,v.KR)([]),p=(0,v.KR)([{role:"assistant",prompt:"",content:"你好，我是辅助角色创作的智能助手。你可以尝试问我以下问题：<br>\n在角色创作中，我应该考虑哪些方面的适合性？<br>\n      对于特定角色，你有什么创意方向和建议？",image:"logo.png",downloadIcon:!0}]),A=(0,v.KR)(!1),m=(0,v.Kh)({group:"characters",name:"",content:"",image:""}),k=(0,v.Kh)({name:"",content:""}),h=(0,N.Pj)(),f={0:"Female Voice",1:"Male Voice"},C=(0,v.Kh)({name:"",content:"",per:"",image:""}),_=(0,n.EW)((()=>b)),b=(0,n.EW)((()=>(console.log(h.state.character.characters),h.state.character.characters)));async function E(){if(!d.value)return void(0,U.nk)({message:"输入不能为空",type:"warning"});const e={role:"user",content:d.value};g.value.push(e);const a={action:"get_character_help",data:{history:g.value.map((e=>({role:e.role,content:e.content}))),user_input:d.value}},t={role:"assistant",prompt:d.value,content:"loading...",image:"logo.png",downloadIcon:!0};p.value.push(t);try{const e=await R.A.post("/api/get_character_help",a);if(200===e.status){const a={role:"assistant",prompt:d.value,content:e.data.answer,image:"logo.png",downloadIcon:!0};p.value.splice(p.value.length-1,1,a),g.value.push(a),d.value=""}}catch(l){(0,U.nk)({message:"请求失败",type:"error"})}}function I(e){r.value=e}function S(){u.value=[],a.value=!0}function y(e){b.value[i.value].image=e.url}function J(){m.group="characters",m.name="",m.content="",m.image="",u.value=[],a.value=!1}const w=()=>{m.image=""},Q=()=>{C.image=""},F=()=>{e.$message.warning("只能上传一个附件")};function B(){m.group="",m.name="",m.content="",m.image="",u.value=[],t.value=!1}function D(){let a=h.state.character.characters;if(!m.name)return void e.$message.warning("资产名不能为空");if(a.some((e=>e.name===m.name)))return void e.$message.warning("资产名已存在");if(!m.per)return void e.$message.warning("请选择音色");const t={name:m.name,content:m.content,image:m.image||null,per:m.per};h.dispatch("addCharacter",t),R.A.post("/api/add_character",{action:"add_character",data:t}),J(),e.$message.success("资产新增成功")}function P(e,a){o.value=e,s.value=a,t.value=!0}function M(a,t){if(!t)return void e.$message.warning("资产名为空");const l=b.value.findIndex((e=>e.name===t));if(-1!==l)"image"===o.value?b[l].image=s.value:b[l].content=s.value,h.dispatch("updateCharacter",{index:l,character:b[l]}),e.$message.success("资产更新成功");else{console.log(s.value);const a={name:t,image:"image"===o.value?s.value:null,content:"content"===o.value?s.value:""};h.dispatch("addCharacter",a),e.$message.success("新资产添加成功")}}function V(e){console.log(b.value),console.log(e),b.value[e].image?u.value=[{name:b.value[e].name,url:b.value[e].image}]:u.value=[],i.value=e,C.name=b.value[e].name,C.content=b.value[e].content,C.per=b.value[e].per,C.image=b.value[e].image,k.name=b.value[e].name,k.content=b.value[e].content,console.log(C),l.value=!0}const L=e=>{const a=new FormData;a.append("action","save_character_asset_image"),a.append("character_name",m.name),a.append("character_image",e.file),R.A.post("/api/update_character_asset_image",a).then((a=>{a.data.success?(m.image=a.data.filePath,e.onSuccess(a.data,e.file)):e.onError(new Error("Upload failed"))})).catch((a=>{e.onError(a)}))};function $(){l.value=!1}function W(){A.value=!0}function T(){A.value=!1}async function G(){const e=b.value[i.value].name;h.dispatch("deleteCharacter",i.value),await R.A.post("/api/delete_character",{action:"delete_character",data:{index:i.value}}),A.value=!1,$(),(0,U.nk)({type:"success",message:`成功删除资产 "${e}"`})}function K(e){return e||"@/assets/images/logo.png"}function x(e){e.success&&(b[i.value].image=e.filePath,h.dispatch("updateCharacter",{index:i.value,character:b[i.value]}))}async function X(){console.log(k);let a="";re.JJ(k.content,C.content).forEach((e=>{const t=e.value.replace(/\n/g,"");e.added?a+=`[${t}]`:e.removed?a+=`{${t}}`:a+=t})),await R.A.post("/api/save_changes",{action:"save_changes",data:{changes:a}});const t=JSON.parse(JSON.stringify(C));t.name?t.content?t.per?(h.dispatch("updateCharacter",{index:i.value,character:t}),await R.A.post("/api/update_character",{action:"update_character",data:{index:i.value,character:t}}),e.$message.success("资产更新成功"),l.value=!1):e.$message.warning("请选择音色"):e.$message.warning("描述不能为空"):e.$message.warning("资产名不能为空")}async function Z(){c.value=!0;const e={action:"create_character_picture",data:{name:C.name,content:C.content}},a=await R.A.post("/api/create_character_picture",e),t="/api/get_image?filename="+a.data.image+"&path=character";u.value.push({name:C.name,url:t}),c.value=!1,console.log(u.value),m.image=t,C.image=t,b.value[i.value].image=t}async function O(){c.value=!0;const e={action:"create_character_picture",data:{name:m.name,content:m.content}},a=await R.A.post("/api/create_character_picture",e),t="/api/get_image?filename="+a.data.image+"&path=character";u.value.push({name:m.name,url:t}),c.value=!1,console.log(u.value),m.image=t,m.image=t}return{currentEditAsset:C,fileList:u,addDialogVisible:a,inputMessage:d,selectedTab:r,messages:p,newAsset:m,filteredAssets:_,showSaveDialog:t,curSaveType:o,curSaveThing:s,showEditDialog:l,curEditAssetIndex:i,showDeleteConfirm:A,generate_new_image:O,handleSaveClose:B,handleRemove:w,handleEditRemove:Q,handleExceed:F,sendMessage:E,showAddDialog:S,handleAddDialogClose:J,addNewAsset:D,selectTab:I,saveAsset:P,saveAssetConfirm:M,editAsset:V,uploadFile:L,handleEditClose:$,handleUploadSuccess:x,saveEditedAsset:X,getImageSrc:K,showDeleteDialog:W,cancelDelete:T,confirmDelete:G,handlePictureCardPreview:y,generate_image:Z,loading:c,charList:b,audios:f}}});const pe=(0,i.A)(ge,[["render",de],["__scopeId","data-v-57de495c"]]);var Ae=pe,me={name:"PageOne",components:{GCharacter:Ae},computed:{...(0,N.aH)("logline",{storyline:e=>e.storyline})}};const ke=(0,i.A)(me,[["render",j],["__scopeId","data-v-fba8e688"]]);var he=ke;function ve(e,a,t,l,o,s){const c=(0,n.g2)("GPlot");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(c)])}const fe=e=>((0,n.Qi)("data-v-47154ba6"),e=e(),(0,n.jt)(),e),Ce={class:"plot-header"},_e={class:"plot-name"},be={style:{float:"left"}},Ee=fe((()=>(0,n.Lk)("div",null,"Are you sure to remove the plot?",-1))),Ie={class:"dialog-footer"};function Se(e,a,t,o,s,c){const i=(0,n.g2)("el-header"),u=(0,n.g2)("el-button"),d=(0,n.g2)("el-input"),r=(0,n.g2)("el-card"),g=(0,n.g2)("el-scrollbar"),p=(0,n.g2)("el-main"),m=(0,n.g2)("el-footer"),k=(0,n.g2)("el-form-item"),h=(0,n.g2)("el-radio"),v=(0,n.g2)("el-radio-group"),f=(0,n.g2)("el-option"),C=(0,n.g2)("el-select"),_=(0,n.g2)("el-form"),b=(0,n.g2)("el-dialog"),E=(0,n.g2)("el-tag"),I=(0,n.g2)("el-container"),S=(0,n.gN)("loading");return(0,n.uX)(),(0,n.Wv)(I,{class:"main-container"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{class:"plot"},{default:(0,n.k6)((()=>[(0,n.bF)(i,{class:"header"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,(0,A.v_)(this.$t("plots")),1)])),_:1}),(0,n.bF)(p,{class:"plot"},{default:(0,n.k6)((()=>[(0,n.bF)(i,{class:"button-container-up"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"button",onClick:e.generatePlot},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("GenP")),1)])),_:1},8,["onClick"]),(0,n.bF)(u,{class:"button",onClick:e.AddPlot},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("AddP")),1)])),_:1},8,["onClick"])])),_:1}),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(p,{class:"plot-list-container"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{class:"plots-list"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.plots,((a,t)=>((0,n.uX)(),(0,n.Wv)(r,{key:t,class:"plot-item",onClick:a=>e.editPlot(t)},{default:(0,n.k6)((()=>[(0,n.Lk)("div",Ce,[(0,n.Lk)("div",_e,[(0,n.Lk)("div",null,"Plot"+(0,A.v_)(t+1)+" : "+(0,A.v_)(a.plotName),1)])]),(0,n.bF)(d,{type:"textarea",modelValue:a.beat,"onUpdate:modelValue":e=>a.beat=e,placeholder:"输入情节梗概...",class:"beat-input"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})),[[S,e.loading]]),(0,n.bF)(m,{class:"button-container-down"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"button",onClick:e.UploadPlot},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("upload")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,n.bF)(b,{title:e.$t("AddP"),modelValue:e.addDialogVisible,"onUpdate:modelValue":a[5]||(a[5]=a=>e.addDialogVisible=a),"custom-class":"dialog-content"},{default:(0,n.k6)((()=>[(0,n.bF)(_,{model:e.newPlot,"label-width":"100px",class:"add-plot-form"},{default:(0,n.k6)((()=>[(0,n.bF)(k,{label:this.$t("P_name")},{default:(0,n.k6)((()=>[(0,n.bF)(d,{modelValue:e.newPlot.plotName,"onUpdate:modelValue":a[0]||(a[0]=a=>e.newPlot.plotName=a),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label"]),(0,n.bF)(k,{label:this.$t("P_stage")},{default:(0,n.k6)((()=>[(0,n.bF)(v,{modelValue:e.newPlot.plotStage,"onUpdate:modelValue":a[1]||(a[1]=a=>e.newPlot.plotStage=a)},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.stageList,(e=>((0,n.uX)(),(0,n.Wv)(h,{key:e,label:e,value:e},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(e),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,n.bF)(k,{label:this.$t("P_s")},{default:(0,n.k6)((()=>[(0,n.bF)(C,{modelValue:e.newPlot.scene,"onUpdate:modelValue":a[2]||(a[2]=a=>e.newPlot.scene=a),placeholder:"please select or create a scene","allow-create":"",filterable:"","value-key":"name"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.allScenes,(e=>((0,n.uX)(),(0,n.Wv)(f,{key:e.value,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,n.bF)(k,{label:this.$t("P_c")},{default:(0,n.k6)((()=>[(0,n.bF)(C,{modelValue:e.newPlot.characters,"onUpdate:modelValue":a[3]||(a[3]=a=>e.newPlot.characters=a),multiple:"",placeholder:"please select the appearing characters","value-key":"name"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.allCharacters,(e=>((0,n.uX)(),(0,n.Wv)(f,{key:e.name,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,n.bF)(k,{label:this.$t("P_in")},{default:(0,n.k6)((()=>[(0,n.bF)(d,{type:"textarea",modelValue:e.newPlot.beat,"onUpdate:modelValue":a[4]||(a[4]=a=>e.newPlot.beat=a),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label"]),(0,n.bF)(m,{class:"dialog-footer"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{onClick:e.handleAddDialogClose,class:"cancel-button"},{default:(0,n.k6)((()=>[(0,n.eW)("cancel")])),_:1},8,["onClick"]),(0,n.bF)(u,{type:"primary",onClick:e.addNewPlot,class:"confirm-button"},{default:(0,n.k6)((()=>[(0,n.eW)("confirm")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","modelValue"]),(0,n.bF)(b,{title:e.$t("EditP"),modelValue:e.editDialogVisible,"onUpdate:modelValue":a[13]||(a[13]=a=>e.editDialogVisible=a),"custom-class":"dialog-content"},{default:(0,n.k6)((()=>[(0,n.bF)(_,{model:e.editPlotData,"label-width":"100px",class:"add-plot-form"},{default:(0,n.k6)((()=>[(0,n.bF)(k,{label:this.$t("P_number")},{default:(0,n.k6)((()=>[(0,n.bF)(d,{modelValue:e.editPlotData.No,"onUpdate:modelValue":a[6]||(a[6]=a=>e.editPlotData.No=a),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label"]),(0,n.bF)(k,{label:this.$t("P_name")},{default:(0,n.k6)((()=>[(0,n.bF)(d,{modelValue:e.editPlotData.plotName,"onUpdate:modelValue":a[7]||(a[7]=a=>e.editPlotData.plotName=a),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label"]),(0,n.bF)(k,{label:this.$t("P_stage")},{default:(0,n.k6)((()=>[(0,n.bF)(v,{modelValue:e.editPlotData.plotStage,"onUpdate:modelValue":a[8]||(a[8]=a=>e.editPlotData.plotStage=a)},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.stageList,(e=>((0,n.uX)(),(0,n.Wv)(h,{key:e,label:e,value:e},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(e),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,n.bF)(k,{label:this.$t("P_s")},{default:(0,n.k6)((()=>[(0,n.bF)(C,{modelValue:e.editPlotData.scene,"onUpdate:modelValue":a[9]||(a[9]=a=>e.editPlotData.scene=a),placeholder:"please select or create a scene","value-key":"name",clearable:"",filterable:"","allow-create":""},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.allScenes,((a,t)=>((0,n.uX)(),(0,n.Wv)(f,{key:a,label:a.name,value:a},{default:(0,n.k6)((()=>[(0,n.Lk)("span",be,(0,A.v_)(a.name),1),(0,n.bF)(E,{size:"mini",effect:"dark",type:"danger",style:{float:"right","margin-top":"8px","margin-left":"3px"},onClick:(0,l.D$)((a=>e.handleDelete(t)),["stop"])},{default:(0,n.k6)((()=>[(0,n.eW)(" Delete ")])),_:2},1032,["onClick"])])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,n.bF)(k,{label:this.$t("P_c")},{default:(0,n.k6)((()=>[(0,n.bF)(C,{modelValue:e.editPlotData.characters,"onUpdate:modelValue":a[10]||(a[10]=a=>e.editPlotData.characters=a),multiple:"",placeholder:"please select the appearing characters","value-key":"name"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.allCharacters,(e=>((0,n.uX)(),(0,n.Wv)(f,{key:e.name,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,n.bF)(k,{label:this.$t("P_in")},{default:(0,n.k6)((()=>[(0,n.bF)(d,{type:"textarea",modelValue:e.editPlotData.beat,"onUpdate:modelValue":a[11]||(a[11]=a=>e.editPlotData.beat=a),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label"]),(0,n.bF)(m,{class:"dialog-footer"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{onClick:e.handleEditDialogClose,class:"cancel-button"},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("cancel")),1)])),_:1},8,["onClick"]),(0,n.bF)(u,{type:"danger",onClick:e.showDeleteDialog,class:"delete-button"},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("delete")),1)])),_:1},8,["onClick"]),(0,n.bF)(u,{type:"primary",onClick:e.saveEditedPlot,class:"confirm-button"},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("confirm")),1)])),_:1},8,["onClick"])])),_:1}),(0,n.bF)(b,{modelValue:e.showDeleteConfirm,"onUpdate:modelValue":a[12]||(a[12]=a=>e.showDeleteConfirm=a)},{default:(0,n.k6)((()=>[Ee,(0,n.Lk)("span",Ie,[(0,n.bF)(u,{onClick:e.cancelDelete,class:"cancel-button"},{default:(0,n.k6)((()=>[(0,n.eW)("Cancel")])),_:1},8,["onClick"]),(0,n.bF)(u,{type:"danger",onClick:e.confirmDelete,class:"confirm-button"},{default:(0,n.k6)((()=>[(0,n.eW)("Confirm")])),_:1},8,["onClick"])])])),_:1},8,["modelValue"])])),_:1},8,["model"])])),_:1},8,["title","modelValue"])])),_:1})}var ye=(0,n.pM)({name:"GPlot",setup(){const e=(0,N.Pj)(),a=(0,v.KR)(!1),t=(0,v.KR)(!1),l=(0,v.KR)(!1),o=(0,v.KR)(!1),s=(0,v.Kh)({plotName:"",plotStage:"",scene:"",characters:[],beat:"",dialogue:[]}),c=(0,v.Kh)({No:"",beat:""}),i=(0,v.Kh)({No:"",plotName:"",plotStage:"",scene:"",characters:[],beat:"",dialogue:[]}),u=(0,v.KR)(null),d=(0,n.EW)((()=>e.getters["plots"])),r=(0,n.EW)((()=>e.state.scene.scenes)),g=(0,n.EW)((()=>e.state.character.characters)),p=["exposition","incident","conflict","rising","climax","falling","end"],A=()=>e.dispatch("delPlots"),m=()=>e.dispatch("delScenes"),k=a=>e.dispatch("addPlot",a),h=a=>e.dispatch("addScene",a),f=a=>e.dispatch("updatePlot",a),C=a=>e.dispatch("movePlot",a);function _(){t.value=!0}function b(){o.value=!0}function E(){o.value=!1}function I(){l.value=!1}function S(){e.dispatch("deletePlot",u.value),o.value=!1,I(),(0,U.nk)({type:"success",message:"成功删除情节"})}async function y(a){e.dispatch("deleteScene",a),await R.A.post("/api/delete_scene_asset",{action:"delete_scene_asset",data:{index:a}})}function J(){s.plotName="",s.plotStage="",s.scene="",s.characters=[],s.beat="",s.dialogue=[],t.value=!1}function w(){i.No="",i.plotName="",i.plotStage="",i.scene="",i.characters=[],i.beat="",i.dialogue=[],l.value=!1}async function Q(){if(!s.plotName)return void(0,U.nk)({message:"情节名称不能为空",type:"warning"});if(!s.scene)return void(0,U.nk)({message:"场景不能为空",type:"warning"});if(console.log(s.scene),0===s.characters.length)return console.log(s),void(0,U.nk)({message:"角色不能为空",type:"warning"});if("object"!==typeof s.scene){const e={name:s.scene,content:"",image:null};s.scene=e,h({...e}),await R.A.post("/api/add_scene",{action:"add_scene",data:{scene:e}})}const e=d.value.findIndex((e=>e.plotName===s.plotName));-1!==e?(f({index:e,plot:{...s}}),(0,U.nk)({message:"更新成功",type:"success"})):(k({...s}),(0,U.nk)({message:"添加成功",type:"success"})),J()}function F(e){c.No=e+1,c.beat=d.value[e].beat;const a=d.value[e];i.No=e+1,i.plotName=a.plotName,i.plotStage=a.plotStage,i.scene=a.scene,i.characters=a.characters,i.beat=a.beat,i.dialogue=a.dialogue,u.value=e,l.value=!0}async function B(){if(!i.plotName)return void(0,U.nk)({message:"情节名称不能为空",type:"warning"});if(!i.scene)return void(0,U.nk)({message:"场景不能为空",type:"warning"});if(0===i.characters.length)return void(0,U.nk)({message:"角色不能为空",type:"warning"});if(isNaN(Number(i.No,10)))return void(0,U.nk)({message:"序号必须为数字",type:"warning"});let e="";if(re.JJ(c.beat,i.beat).forEach((a=>{const t=a.value.replace(/\n/g,"");a.added?e+=`[${t}]`:a.removed?e+=`{${t}}`:e+=t})),await R.A.post("/api/save_changes",{action:"save_changes",data:{changes:e}}),"object"!==typeof i.scene){const e={name:i.scene,content:"",image:null};i.scene=e,h({...e}),await R.A.post("/api/add_scene",{action:"add_scene",data:{scene:e}})}const a={plotName:i.plotName,plotStage:i.plotStage,scene:i.scene,characters:i.characters,beat:i.beat};Number(i.No,10)!==c.No?(C({fromIndex:c.No-1,toIndex:i.No-1}),f({index:i.No-1,plot:a})):f({index:u.value,plot:a}),(0,U.nk)({message:"情节更新成功",type:"success"}),w()}async function D(){A(),m()}async function P(){try{a.value=!0;const t=await R.A.post("/api/init_plot_generation",{action:"init_plot_generation",data:{characters:e.state.character.characters}});a.value=!1,await D(),k(t.data);const l=t.data.reduce(((e,a)=>(e.find((e=>e.name===a.scene.name))||e.push({name:a.scene.name,content:a.scene.content,image:null}),e)),[]);e.dispatch("addScene",l)}catch(t){(0,U.nk)({message:"请求失败",type:"error"})}}async function M(){const e={action:"update_plot",data:d.value.map((e=>({plotName:e.plotName,plotStage:e.plotStage,scene:e.scene,"情节梗概":e.beat,characters:e.characters.map((e=>({name:e})))})))};try{await R.A.post("/api/update_plot",e),(0,U.nk)({message:"上传成功",type:"success"})}catch(a){(0,U.nk)({message:"上传失败",type:"error"})}}return{addDialogVisible:t,editDialogVisible:l,plots:d,handleDelete:y,newPlot:s,stageList:p,editPlotData:i,showDeleteConfirm:o,allScenes:r,allCharacters:g,loading:a,AddPlot:_,handleAddDialogClose:J,handleEditDialogClose:w,addNewPlot:Q,editPlot:F,saveEditedPlot:B,showDeleteDialog:b,cancelDelete:E,confirmDelete:S,generatePlot:P,UploadPlot:M}}});const Je=(0,i.A)(ye,[["render",Se],["__scopeId","data-v-47154ba6"]]);var we=Je,Qe={name:"PageTwo",components:{GPlot:we}};const Fe=(0,i.A)(Qe,[["render",ve],["__scopeId","data-v-fe9c1e5c"]]);var Be=Fe;function De(e,a,t,l,o,s){const c=(0,n.g2)("GScene");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(c)])}const Pe=e=>((0,n.Qi)("data-v-57418182"),e=e(),(0,n.jt)(),e),Me={class:"art-asset"},Ve=["src"],Le=["src"],$e={class:"chat"},We={key:0,class:"human-iutput"},Te=Pe((()=>(0,n.Lk)("br",null,null,-1))),Ge=["innerHTML"],Ke=["src"],xe=Pe((()=>(0,n.Lk)("i",{class:"el-icon-plus"},null,-1))),Xe=Pe((()=>(0,n.Lk)("div",null,"你确认删除该资产吗？",-1))),Ne={class:"dialog-footer"},Ue=["src"];function Re(e,a,o,s,c,i){const u=(0,n.g2)("el-header"),d=(0,n.g2)("el-col"),r=(0,n.g2)("el-row"),g=(0,n.g2)("el-card"),p=(0,n.g2)("el-scrollbar"),m=(0,n.g2)("el-container"),k=(0,n.g2)("el-avatar"),h=(0,n.g2)("el-main"),v=(0,n.g2)("el-button"),f=(0,n.g2)("el-input"),C=(0,n.g2)("el-footer"),_=(0,n.g2)("el-aside"),b=(0,n.g2)("el-form-item"),E=(0,n.g2)("el-upload"),I=(0,n.g2)("el-dialog"),S=(0,n.gN)("loading");return(0,n.uX)(),(0,n.Wv)(m,{class:"main-container"},{default:(0,n.k6)((()=>[(0,n.bF)(m,{class:"scene-panel"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"art-asset-header"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",Me,(0,A.v_)(this.$t("scenes")),1)])),_:1}),(0,n.bF)(m,{class:"rightcontainer"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{class:"assets-list"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.sceneList,((a,l)=>((0,n.uX)(),(0,n.Wv)(g,{key:l,class:"asset-item",shadow:"hover",onClick:a=>e.editAsset(l)},{default:(0,n.k6)((()=>[(0,n.bF)(r,{gutter:10,style:{width:"100%"},align:"middle"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{span:10,style:{"text-align":"center"}},{default:(0,n.k6)((()=>[a.image?((0,n.uX)(),(0,n.CE)("img",{key:0,class:"asset-image",src:a.image},null,8,Ve)):((0,n.uX)(),(0,n.CE)("img",{key:1,class:"asset-image",src:t(5512)},null,8,Le))])),_:2},1024),(0,n.bF)(d,{span:14},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,(0,A.v_)(a.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1}),(0,n.bF)(_,{class:"chat-panel"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",$e,[(0,n.bF)(u,{class:"header"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,(0,A.v_)(this.$t("Scene_AI")),1)])),_:1}),(0,n.bF)(h,null,{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.messages,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{class:"message",key:a},[(0,n.bF)(r,{gutter:5,align:"middle"},{default:(0,n.k6)((()=>[e.prompt?((0,n.uX)(),(0,n.CE)("div",We,(0,A.v_)(e.prompt),1)):(0,n.Q3)("",!0)])),_:2},1024),Te,(0,n.bF)(r,{align:"top"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{span:4},{default:(0,n.k6)((()=>[(0,n.bF)(k,{src:t(2723),class:"llm"},null,8,["src"])])),_:1}),(0,n.bF)(d,{span:20},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{class:"AI-output",innerHTML:e.content},null,8,Ge)])),_:2},1024)])),_:2},1024)])))),128))])),_:1}),(0,n.bF)(C,{class:"inputfooter"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{placeholder:e.$t("AI_input"),modelValue:e.inputMessage,"onUpdate:modelValue":a[0]||(a[0]=a=>e.inputMessage=a),class:"input-field",onKeyup:(0,l.jR)(e.sendMessage,["enter"]),clearable:""},{append:(0,n.k6)((()=>[(0,n.bF)(v,{onClick:e.sendMessage},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{class:"upload-image",src:t(2456)},null,8,Ke)])),_:1},8,["onClick"])])),_:1},8,["placeholder","modelValue","onKeyup"])])),_:1})])])),_:1}),(0,n.bF)(I,{title:this.$t("EditS"),modelValue:e.showEditDialog,"onUpdate:modelValue":a[5]||(a[5]=a=>e.showEditDialog=a),"custom-class":"dialog-content"},{default:(0,n.k6)((()=>[(0,n.bF)(b,{label:this.$t("S_name"),"label-width":e.formLabelWidth},{default:(0,n.k6)((()=>[(0,n.bF)(f,{modelValue:e.currentEditAsset.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.currentEditAsset.name=a),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label","label-width"]),(0,n.bF)(b,{label:this.$t("S_de"),"label-width":e.formLabelWidth},{default:(0,n.k6)((()=>[(0,n.bF)(f,{modelValue:e.currentEditAsset.content,"onUpdate:modelValue":a[2]||(a[2]=a=>e.currentEditAsset.content=a),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label","label-width"]),(0,n.bF)(b,{label:this.$t("S_p"),"label-width":e.formLabelWidth},{default:(0,n.k6)((()=>[(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(E,{"http-request":e.uploadFile,"list-type":"picture-card","on-success":e.handleUploadSuccess,"file-list":e.fileList,"onUpdate:fileList":a[3]||(a[3]=a=>e.fileList=a),"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-exceed":e.handleExceed},{default:(0,n.k6)((()=>[xe])),_:1},8,["http-request","on-success","file-list","on-preview","on-remove","on-exceed"]),(0,n.bF)(v,{onClick:e.generate_image,class:"confirm-button"},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("S_Genp")),1)])),_:1},8,["onClick"])])),[[S,e.loading]])])),_:1},8,["label","label-width"]),(0,n.bF)(C,{class:"dialog-footer"},{default:(0,n.k6)((()=>[(0,n.bF)(v,{onClick:e.handleEditClose,class:"cancel-button"},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("cancel")),1)])),_:1},8,["onClick"]),(0,n.bF)(v,{type:"primary",onClick:e.saveEditedAsset,class:"confirm-button"},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("confirm")),1)])),_:1},8,["onClick"])])),_:1}),(0,n.bF)(I,{modelValue:e.showDeleteConfirm,"onUpdate:modelValue":a[4]||(a[4]=a=>e.showDeleteConfirm=a)},{default:(0,n.k6)((()=>[Xe,(0,n.Lk)("span",Ne,[(0,n.bF)(v,{onClick:e.cancelDelete,class:"cancel-button"},{default:(0,n.k6)((()=>[(0,n.eW)("取消")])),_:1},8,["onClick"]),(0,n.bF)(v,{type:"danger",onClick:e.confirmDelete,class:"confirm-button"},{default:(0,n.k6)((()=>[(0,n.eW)("确定")])),_:1},8,["onClick"])])])),_:1},8,["modelValue"])])),_:1},8,["title","modelValue"]),(0,n.bF)(I,{modelValue:e.previewVisible,"onUpdate:modelValue":a[6]||(a[6]=a=>e.previewVisible=a),"append-to-body":!0},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{width:"100%",src:e.previewImage,alt:"图片预览"},null,8,Ue)])),_:1},8,["modelValue"])])),_:1})}var Ze=(0,n.pM)({name:"GScene",setup(){const e=(0,v.KR)(!1),a=(0,v.KR)(""),{proxy:t}=(0,n.nI)(),l=(0,v.KR)(!1),o=(0,v.KR)(!1),s=(0,v.KR)(!1),c=(0,v.KR)(""),i=(0,v.KR)(""),u=(0,v.KR)(""),d=(0,v.KR)([]),r=(0,v.KR)(""),g=(0,v.KR)("scene"),p=(0,v.KR)([]),A=(0,v.KR)(!1),m=(0,v.KR)([{role:"assistant",prompt:"",content:"你好，我是帮助你进行场景创作的智能助手。你可以尝试问我：\n        <br> 在场景创作的适宜性方面，我应该考虑哪些方面？\n        <br> 对于特定场景，你有什么创意方向和建议？",image:"logo.png",downloadIcon:!0}]),k=(0,v.KR)(!1),h=(0,n.EW)((()=>_.state.scene.scenes)),f=(0,v.Kh)({group:"scenes",name:"",content:"",image:null}),C=(0,v.Kh)({name:"",content:""}),_=(0,N.Pj)(),b=(0,v.Kh)({group:"scenes",name:"",content:"",image:null}),E=(0,n.EW)((()=>I)),I=(0,n.EW)((()=>_.state.scene.scenes));function S(t){a.value=t.url,e.value=!0}const y=(0,N.i0)("scene",["addScene","deleteScene"]),J=e=>_.dispatch("updateScene",e);async function w(){if(!r.value)return void(0,U.nk)({message:"输入不能为空",type:"warning"});const e={role:"user",content:r.value};p.value.push(e);const a={action:"get_scene_help",data:{history:p.value.map((e=>({role:e.role,content:e.content}))),user_input:r.value}},t={role:"assistant",prompt:r.value,content:"loading...",image:"logo.png",downloadIcon:!0};m.value.push(t);try{const e=await R.A.post("/api/get_scene_help",a);if(200===e.status){const a={role:"assistant",prompt:r.value,content:e.data.answer,image:"logo.png",downloadIcon:!0};m.value.splice(m.value.length-1,1,a),p.value.push(a),r.value=""}}catch(l){(0,U.nk)({message:"请求失败",type:"error"})}}function Q(e){g.value=e}function F(){l.value=!0}function B(){f.group="scenes",f.name="",f.content="",f.image=null,d.value=[],l.value=!1}const D=()=>{f.image=null},P=()=>{t.$message.warning("只能上传一个附件")};function M(){f.group="",f.name="",f.content="",f.image=null,d.value=[],o.value=!1}function V(e,a){c.value=e,i.value=a,o.value=!0}async function L(e,a){if(!a)return void t.$message.warning("资产名为空");const l=I.value.findIndex((e=>e.name===a));if(-1!==l)"image"===c.value?I[l].image=i.value:I[l].content=i.value,y.updateScene({index:l,scene:I[l]}),t.$message.success("资产更新成功"),await R.A.post("/api/update_scene_asset",{action:"update_scene_asset",data:{scene:I[l],index:l}});else{const e={name:a,url:"image"===c.value?i.value:null,content:"content"===c.value?i.value:""};y.addScene(e),t.$message.success("新资产添加成功"),await R.A.post("/api/save_scene_asset",{action:"save_scene_asset",data:{scene:e}})}o.value=!1}function $(e){C.name=I.value[e].name,C.content=I.value[e].content,null!==h.value[e].image&&(d.value=[{name:h.value[e].name,url:h.value[e].image}]),u.value=e,b.name=I.value[e].name,b.content=I.value[e].content,b.image=I.value[e].image,s.value=!0}const W=async e=>{const a=new FormData;a.append("action","save_scene_asset_image"),a.append("scene_name",f.name),a.append("scene_content",f.content),a.append("scene_image",e.file),await R.A.post("/api/save_scene_asset",a).then((a=>{a.data.success?(f.image=a.data.filePath,e.onSuccess(a.data,e.file)):e.onError(new Error("Upload failed"))})).catch((a=>{e.onError(a)}))};function T(){s.value=!1}function G(){k.value=!0}function K(){k.value=!1}async function x(){y.deleteScene(u.value),await R.A.post("/api/delete_scene_asset",{action:"delete_scene_asset",data:{index:u.value}}),k.value=!1,T(),(0,U.nk)({type:"success",message:`成功删除资产 "${b.value.name}"`})}function X(e){return e||"@/assets/images/logo.png"}function Z(e){e.success&&(I[u.value].image=e.filePath,y.updateScene({index:u.value,scene:I[u.value]}))}async function O(){let e="";if(re.JJ(C.content,b.content).forEach((a=>{const t=a.value.replace(/\n/g,"");a.added?e+=`[${t}]`:a.removed?e+=`{${t}}`:e+=t})),await R.A.post("/api/save_changes",{action:"save_changes",data:{changes:e}}),!b.name)return void t.$message.warning("资产名不能为空");if(!b.content)return void t.$message.warning("描述不能为空");console.log(b);const a=_.state.plot.plots[u.value];console.log(a),a.scene={...b},J({index:u.value,scene:{...b}}),_.dispatch("updatePlot",{index:u.value,plot:a}),await R.A.post("/api/save_scene_asset",{action:"save_scene_asset",data:{index:u.value,scene:b}}),t.$message.success("资产更新成功"),s.value=!1}async function Y(){A.value=!0;const e={action:"create_scene_picture",data:{name:b.name,user_input:b.content}},a=await R.A.post("/api/create_scene_picture",e),t="/api/get_image?filename="+a.data.image+"&path=scene";h.value[u.value]={name:b.name,url:t},A.value=!1,b.image=t,d.value.push({name:b.name,url:t}),f.image=t}return{currentEditAsset:b,fileList:d,addDialogVisible:l,inputMessage:r,selectedTab:g,messages:m,newAsset:f,filteredAssets:E,showSaveDialog:o,curSaveType:c,loading:A,curSaveThing:i,showEditDialog:s,curEditAssetIndex:u,showDeleteConfirm:k,handleSaveClose:M,handleRemove:D,handleExceed:P,sendMessage:w,showAddDialog:F,handlePictureCardPreview:S,handleAddDialogClose:B,selectTab:Q,saveAsset:V,saveAssetConfirm:L,editAsset:$,uploadFile:W,handleEditClose:T,handleUploadSuccess:Z,saveEditedAsset:O,getImageSrc:X,showDeleteDialog:G,cancelDelete:K,confirmDelete:x,generate_image:Y,...y,scenes:I,sceneList:h,previewVisible:e,previewImage:a}}});const Oe=(0,i.A)(Ze,[["render",Re],["__scopeId","data-v-57418182"]]);var Ye=Oe,je={name:"PageThree",components:{GScene:Ye}};const He=(0,i.A)(je,[["render",De],["__scopeId","data-v-a79b7d3a"]]);var qe=He;function ze(e,a,t,l,o,s){const c=(0,n.g2)("GDialogue");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(c)])}const ea=e=>((0,n.Qi)("data-v-02ec1807"),e=e(),(0,n.jt)(),e),aa={class:"plot-header"},ta={class:"scene-name"},la=["src"],na=["src"],oa={style:{position:"absolute",right:"0%",top:"1%"}},sa={class:"character"},ca=["onClick"],ia=ea((()=>(0,n.Lk)("g",{fill:"none"},[(0,n.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.08 9H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h.08a2 2 0 0 1 1.519.698l3.642 4.25c.604.704 1.759.277 1.759-.651V4.703c0-.928-1.155-1.355-1.76-.65L6.6 8.301A2 2 0 0 1 5.08 9zm13.556-4.725a1 1 0 1 0-1.377 1.45c3.655 3.472 3.655 9.078 0 12.55a1 1 0 1 0 1.377 1.45c4.485-4.26 4.485-11.19 0-15.45zm-2.947 2.8a1 1 0 1 0-1.378 1.45c2.027 1.925 2.027 5.025 0 6.95a1 1 0 1 0 1.378 1.45c2.857-2.714 2.857-7.136 0-9.85z",fill:"currentColor"})],-1))),ua=[ia],da=["src"];function ra(e,a,l,o,s,c){const i=(0,n.g2)("el-header"),u=(0,n.g2)("el-button"),d=(0,n.g2)("el-main"),r=(0,n.g2)("el-col"),g=(0,n.g2)("el-row"),p=(0,n.g2)("el-card"),m=(0,n.g2)("CloseBold"),k=(0,n.g2)("el-icon"),h=(0,n.g2)("Plus"),v=(0,n.g2)("CaretTop"),f=(0,n.g2)("CaretBottom"),C=(0,n.g2)("el-input"),_=(0,n.g2)("MagicStick"),b=(0,n.g2)("el-scrollbar"),E=(0,n.g2)("el-option"),I=(0,n.g2)("el-select"),S=(0,n.g2)("el-form-item"),y=(0,n.g2)("el-footer"),J=(0,n.g2)("el-form"),w=(0,n.g2)("el-dialog"),Q=(0,n.g2)("el-container"),F=(0,n.gN)("loading");return(0,n.uX)(),(0,n.Wv)(Q,{class:"main-container"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{class:"dialogue"},{default:(0,n.k6)((()=>[(0,n.bF)(i,{class:"header"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,(0,A.v_)(this.$t("dialogues")),1)])),_:1}),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(d,{class:"dialogue"},{default:(0,n.k6)((()=>[(0,n.bF)(i,{class:"button-container-up"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{class:"plot-name-list"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.plots,((a,t)=>((0,n.uX)(),(0,n.Wv)(u,{key:t,class:"plot-name-button",onClick:a=>e.selectPlot(t)},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(a.plotName),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,n.bF)(d,{class:"dialogue-list-container"},{default:(0,n.k6)((()=>[(0,n.bF)(b,{class:"plots-list"},{default:(0,n.k6)((()=>[e.selectedPlot?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.bF)(p,{class:"plot-item"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",aa,[(0,n.Lk)("div",ta," Plot Name: "+(0,A.v_)(e.selectedPlot.plotName),1),(0,n.bF)(u,{onClick:e.generate_dialogue,class:"confirm-button"},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("GenD")),1)])),_:1},8,["onClick"])]),(0,n.bF)(g,null,{default:(0,n.k6)((()=>[(0,n.bF)(r,{span:3},{default:(0,n.k6)((()=>[e.selectedPlot.scene.image?((0,n.uX)(),(0,n.CE)("img",{key:0,class:"scene-image",src:e.selectedPlot.scene.image,alt:"Asset Image"},null,8,la)):((0,n.uX)(),(0,n.CE)("img",{key:1,class:"scene-image",src:t(5512)},null,8,na))])),_:1}),(0,n.bF)(r,{span:1}),(0,n.bF)(r,{span:20},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,"Plot Name: : "+(0,A.v_)(e.selectedPlot.plotStage),1),(0,n.Lk)("div",null,"Scene: "+(0,A.v_)(e.selectedPlot.scene.name),1),(0,n.Lk)("div",null,"Description: "+(0,A.v_)(e.selectedPlot.scene.content),1),(0,n.Lk)("div",null,[(0,n.eW)(" Appearing Characters: "),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.selectedPlot.characters,(e=>((0,n.uX)(),(0,n.CE)("span",{key:e},(0,A.v_)(e.name)+",",1)))),128))]),(0,n.Lk)("div",null,"introduction: "+(0,A.v_)(e.selectedPlot.beat),1)])),_:1})])),_:1})])),_:1}),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dialogues,((t,l)=>((0,n.uX)(),(0,n.Wv)(p,{class:"dialogue-item",shadow:"hover",key:l},{default:(0,n.k6)((()=>[(0,n.bF)(g,{gutter:"10",align:"middle"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",oa,[(0,n.bF)(u,{circle:""},{default:(0,n.k6)((()=>[(0,n.bF)(k,{onClick:a=>e.del_one_dialogue(l)},{default:(0,n.k6)((()=>[(0,n.bF)(m)])),_:2},1032,["onClick"])])),_:2},1024)]),(0,n.bF)(r,{span:3},{default:(0,n.k6)((()=>[(0,n.Lk)("div",sa,(0,A.v_)(t.character)+":",1)])),_:2},1024),(0,n.bF)(r,{span:3},{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.CE)("svg",{onClick:a=>e.generate_audio(t.content,t.character,e.selectedPlotIndex,l),xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24"},ua,8,ca))])),_:2},1024),(0,n.bF)(r,{span:14},{default:(0,n.k6)((()=>[t.audio?((0,n.uX)(),(0,n.CE)("audio",{key:0,ref_for:!0,ref:"audioPlayer",controls:"",style:{height:"15px"}},[(0,n.Lk)("source",{src:t.audio,type:"audio/wav"},null,8,da),(0,n.eW)(" Your browser does not support the audio element. ")],512)):(0,n.Q3)("",!0)])),_:2},1024),(0,n.bF)(r,{span:1},{default:(0,n.k6)((()=>[(0,n.bF)(u,{circle:""},{default:(0,n.k6)((()=>[(0,n.bF)(k,{onClick:a=>e.showAddDialog(l)},{default:(0,n.k6)((()=>[(0,n.bF)(h)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024),l>0?((0,n.uX)(),(0,n.Wv)(r,{key:0,span:1},{default:(0,n.k6)((()=>[(0,n.bF)(u,{circle:""},{default:(0,n.k6)((()=>[(0,n.bF)(k,{onClick:a=>e.swapDialogue(l,l-1)},{default:(0,n.k6)((()=>[(0,n.bF)(v)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)):(0,n.Q3)("",!0),l<e.dialogues.length-1?((0,n.uX)(),(0,n.Wv)(r,{key:1,span:1},{default:(0,n.k6)((()=>[(0,n.bF)(u,{circle:""},{default:(0,n.k6)((()=>[(0,n.bF)(k,{onClick:a=>e.swapDialogue(l,l+1)},{default:(0,n.k6)((()=>[(0,n.bF)(f)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)):(0,n.Q3)("",!0)])),_:2},1024),(0,n.bF)(g,{gutter:"20",align:"middle"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{span:22},{default:(0,n.k6)((()=>[(0,n.bF)(C,{autosize:"",type:"textarea",modelValue:t.content,"onUpdate:modelValue":e=>t.content=e,placeholder:"Enter beat here...",class:"beat-input"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,n.bF)(r,{span:2},{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.bF)(k,{onClick:a[0]||(a[0]=a=>e.better())},{default:(0,n.k6)((()=>[(0,n.bF)(_)])),_:1})])),_:1})])),_:1})])),_:2},1024)])),_:2},1024)))),128))],64)):(0,n.Q3)("",!0)])),_:1}),(0,n.bF)(w,{title:"Add Dialogue",modelValue:e.addDialogVisible,"onUpdate:modelValue":a[3]||(a[3]=a=>e.addDialogVisible=a),"custom-class":"dialog-content"},{default:(0,n.k6)((()=>[(0,n.bF)(J,{model:e.addDialogue,"label-width":"100px",class:"add-plot-form"},{default:(0,n.k6)((()=>[(0,n.bF)(S,{label:"Character"},{default:(0,n.k6)((()=>[(0,n.bF)(I,{modelValue:e.addDialogue.character,"onUpdate:modelValue":a[1]||(a[1]=a=>e.addDialogue.character=a)},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.characters,(e=>((0,n.uX)(),(0,n.Wv)(E,{key:e.name,value:e.name},null,8,["value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(S,{label:"Content"},{default:(0,n.k6)((()=>[(0,n.bF)(C,{modelValue:e.addDialogue.content,"onUpdate:modelValue":a[2]||(a[2]=a=>e.addDialogue.content=a)},null,8,["modelValue"])])),_:1}),(0,n.bF)(y,{class:"dialog-footer"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{onClick:e.addDialogCancel,class:"cancel-button"},{default:(0,n.k6)((()=>[(0,n.eW)("Cancel")])),_:1},8,["onClick"]),(0,n.bF)(u,{type:"primary",onClick:e.addDialogConfirm,class:"confirm-button"},{default:(0,n.k6)((()=>[(0,n.eW)("Confirm")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(y,{class:"button-container-down"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"button",onClick:e.UploadDialogue},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("upload")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})),[[F,e.loading]])])),_:1})])),_:1})}var ga=(0,n.pM)({name:"GDialogue",setup(){const e=(0,N.Pj)(),a=(0,v.KR)(!1),t=(0,n.EW)((()=>e.state.plot.plots)),l=(0,v.KR)(null),o=(0,n.EW)((()=>null!==l.value?t.value[l.value]:null)),s=(0,n.EW)((()=>o.value.dialogue??[])),c=(0,n.EW)((()=>o.value.characters??[])),i=(0,v.KR)([]),u={"Female Voice":0,"Male Voice":1},d=(0,v.Kh)({character:"",content:"",number:0}),r=(0,v.KR)(!1),g=(0,v.KR)(0);async function p(a,t,l,n){const o=`scene${l}_${n}.wav`;console.log(t);let c=e.state.character.characters.find((e=>e.name===t)).per;a=a.replace(/\(.*?\)/g,""),s.value[n].audio="",c=u[c];const i={action:"do_tts",data:{filename:o,text:a,id_speaker:c}};try{await R.A.post("/api/do_tts",i),s.value[n].audio="/api/get_audio?filename="+o,console.log("dialogues.value[index].audio",s.value[n].audio),(0,U.nk)({message:"音频生成成功",type:"success"})}catch(d){(0,U.nk)({message:"音频生成失败",type:"error"})}}function A(e){l.value=e}async function m(){a.value=!0;const e={action:"generate_dialogue",data:{plotName:o.value.plotName,plotStage:o.value.plotStage,scene:o.value.scene,beat:o.value.beat,characters:o.value.characters}};console.log(e);try{const t=await R.A.post("/api/generate_dialogue",e);console.log(t.data),a.value=!1,o.value.dialogue=t.data,i.value=[...i.value,...JSON.parse(JSON.stringify(o.value.dialogue))],console.log("beforeEditAssets",i.value),(0,U.nk)({message:"对话生成成功",type:"success"})}catch(t){(0,U.nk)({message:"对话生成失败",type:"error"})}}async function k(){const e=i.value.map((e=>e.content)),a=t.value.flatMap((e=>e.dialogue?e.dialogue.map((e=>e.content)):[]));console.log("beforeEditDialogues",e),console.log("currentDialogues",a),e.forEach((async(e,t)=>{let l="";re.JJ(e,a[t]).forEach((e=>{const a=e.value.replace(/\n/g,"");e.added?l+=`[${a}]`:e.removed?l+=`{${a}}`:l+=a})),await R.A.post("/api/save_changes",{action:"save_changes",data:{changes:l}})}));const l={action:"upload_dialogue",data:t.value};try{await R.A.post("/api/upload_dialogue",l),(0,U.nk)({message:"上传成功",type:"success"})}catch(n){(0,U.nk)({message:"上传失败",type:"error"})}}function h(e){o.value.dialogue.splice(e,1)}function f(a,t){null!==l.value&&e.dispatch("swapDialogue",{plotIndex:l.value,dialogueIndex1:a,dialogueIndex2:t})}function C(e){g.value=e+1,r.value=!0}function _(){g.value=0,r.value=!1,d.value=(0,v.Kh)({character:"",content:"",number:0})}function b(){s.value.splice(g.value,0,d);for(let e=g.value+1;e<s.value.length;e++)s.value[e].number++;d.value=(0,v.Kh)({character:"",content:"",number:0}),r.value=!1}return{plots:t,selectedPlot:o,dialogues:s,selectedPlotIndex:l,loading:a,selectPlot:A,UploadDialogue:k,generate_audio:p,generate_dialogue:m,del_one_dialogue:h,swapDialogue:f,characters:c,addDialogue:d,addDialogConfirm:b,addDialogCancel:_,showAddDialog:C,addDialogVisible:r}}});const pa=(0,i.A)(ga,[["render",ra],["__scopeId","data-v-02ec1807"]]);var Aa=pa,ma={name:"PageFour",components:{GDialogue:Aa}};const ka=(0,i.A)(ma,[["render",ze],["__scopeId","data-v-661f9bb0"]]);var ha=ka;function va(e,a,t,l,o,s){const c=(0,n.g2)("GScript");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(c)])}const fa={class:"script-header"};function Ca(e,a,t,l,o,s){const c=(0,n.g2)("el-header"),i=(0,n.g2)("el-button"),u=(0,n.g2)("el-scrollbar"),d=(0,n.g2)("el-main"),r=(0,n.g2)("el-container");return(0,n.uX)(),(0,n.Wv)(r,{class:"main-container"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{class:"script"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"header"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,(0,A.v_)(this.$t("playwriting")),1)])),_:1}),(0,n.bF)(c,{class:"button-container-up"},{default:(0,n.k6)((()=>[(0,n.bF)(i,{class:"button",onClick:e.generate_script},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(this.$t("Gen")),1)])),_:1},8,["onClick"])])),_:1}),(0,n.Lk)("div",fa,[(0,n.bF)(u,{class:"script-content"},{default:(0,n.k6)((()=>[(0,n.eW)((0,A.v_)(e.script.storylines)+" ",1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.script.dialogues,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.plotName},[(0,n.Lk)("h3",null,(0,A.v_)(e.plotName),1),(0,n.eW)(" scene: "+(0,A.v_)(e.scene.name)+" ",1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dialogue,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.character},[(0,n.Lk)("div",null,(0,A.v_)(e.character)+": "+(0,A.v_)(e.content),1)])))),128))])))),128))])),_:1})])])),_:1})])),_:1})}var _a=(0,n.pM)({name:"GScript",setup(){const e=(0,v.KR)({storylines:"",dialogues:""});async function a(){const a=await R.A.get("/api/generate_script");e.value.dialogues=a.data["dialogues"],e.value.storylines=a.data["storylines"],console.log(e.value)}return{generate_script:a,script:e}}});const ba=(0,i.A)(_a,[["render",Ca],["__scopeId","data-v-49fc1f70"]]);var Ea=ba,Ia={name:"RenderScript",components:{GScript:Ea}};const Sa=(0,i.A)(Ia,[["render",va],["__scopeId","data-v-02832460"]]);var ya=Sa;const Ja=[{path:"/",redirect:"/home"},{path:"/home",component:M,children:[{path:"inputlogline",name:"LogLine",component:Y,meta:{keepAlive:!0}},{path:"pageone",name:"PageOne",component:he,meta:{keepAlive:!0}},{path:"pagetwo",name:"PageTwo",component:Be,meta:{keepAlive:!0}},{path:"pagethree",name:"PageThree",component:qe,meta:{keepAlive:!0}},{path:"pagefour",name:"PageFour",component:ha,meta:{keepAlive:!0}},{path:"renderscript",name:"RenderScript",component:ya,meta:{keepAlive:!0}}]}],wa=(0,g.aE)({history:(0,g.Bt)("/"),routes:Ja});var Qa=wa,Fa={state(){return{loglineData:null,message:""}},mutations:{setLoglineData(e,a){e.loglineData=a},setMessage(e,a){e.message=a}},actions:{updateLoglineData({commit:e},a){e("setLoglineData",a)},updateMessage({commit:e},a){e("setMessage",a)}},getters:{loglineData:e=>e.loglineData,message:e=>e.message}},Ba={state(){return{characters:[]}},mutations:{setCharacters(e,a){e.characters=a},addCharacter(e,a){Array.isArray(a)?e.characters=e.characters.concat(a):e.characters.push(a),console.log(e.characters)},updateCharacter(e,{index:a,character:t}){e.characters.splice(a,1,t)},deleteCharacter(e,a){e.characters.splice(a,1)}},actions:{setCharacters({commit:e},a){e("setCharacters",a)},addCharacter({commit:e},a){e("addCharacter",a)},updateCharacter({commit:e},a){e("updateCharacter",a)},deleteCharacter({commit:e},a){e("deleteCharacter",a)}},getters:{characters:e=>e.characters}},Da={state:()=>({plots:[]}),mutations:{setPlots(e,a){e.plots=a},delPlots(e){e.plots=[]},delOneDialogue(e,{plotIndex:a,dialogueIndex:t}){console.log(e.plots),console.log(a),console.log(t),e.plots[a]["dialogue"].splice(t,1)},movePlot(e,{fromIndex:a,toIndex:t}){for(let l=0;l<e.plots.length;l++){let n=e.plots[l];if(l===a){e.plots.splice(l,1),e.plots.splice(t,0,n);break}}},addPlot(e,a){Array.isArray(a)?e.plots.push(...a):e.plots.push(a)},updatePlot(e,{index:a,plot:t}){e.plots.splice(a,1,t)},deletePlot(e,a){e.plots.splice(a,1)},swapDialogue(e,{plotIndex:a,dialogueIndex1:t,dialogueIndex2:l}){const n=e.plots[a].dialogue,o=n[t];n[t]=n[l],n[l]=o}},actions:{setPlots({commit:e},a){e("setPlot",a)},addPlot({commit:e},a){e("addPlot",a)},updatePlot({commit:e},a){e("updatePlot",a)},deletePlot({commit:e},a){e("deletePlot",a)},movePlot({commit:e},a){e("movePlot",a)},delOneDialogue({commit:e},a){e("delOneDialogue",a)},swapDialogue({commit:e},a){e("swapDialogue",a)},delPlots({commit:e}){e("delPlots")}},getters:{plots:e=>e.plots}},Pa={state:()=>({scenes:[]}),mutations:{setScenes(e,a){e.scenes=a},delScenes(e){e.scenes=[]},addScene(e,a){Array.isArray(a)?a.forEach((a=>{e.scenes.includes(a)||e.scenes.push(a)})):e.scenes.push(a)},updateScene(e,{index:a,scene:t}){e.scenes.splice(a,1,t)},deleteScene(e,a){e.scenes.splice(a,1)}},actions:{setScenes({commit:e},a){e("setScenes",a)},addScene({commit:e},a){e("addScene",a)},updateScene({commit:e},a){e("updateScene",a)},deleteScene({commit:e},a){e("deleteScene",a)},delScenes({commit:e}){e("delScenes")}},getters:{scenes:e=>e.scenes}},Ma={state:()=>({scripts:[]}),mutations:{setScripts(e,a){e.scripts=a},addScript(e,a){e.scripts.push(a)},updateScript(e,{index:a,script:t}){e.scripts.splice(a,1,t)},deleteScript(e,a){e.scripts.splice(a,1)}},actions:{setScripts({commit:e},a){e("setScripts",a)},addScript({commit:e},a){e("addScript",a)},updateScript({commit:e},a){e("updateScript",a)},deleteScript({commit:e},a){e("deleteScript",a)}},getters:{scripts:e=>e.scripts}},Va={state(){return{language:"zh_CN"}},mutations:{setLanguage(e,a){e.language=a}},actions:{setLanguage({commit:e},a){e("setLanguage",a)}},getters:{language:e=>e.language}},La=(0,N.y$)({modules:{logline:Fa,character:Ba,plot:Da,scene:Pa,script:Ma,language:Va}}),$a={input:"输入故事概要",character:"角色",plot:"情节",scene:"场景",dialogue:"对话",output:"查看剧本",SCRIPT_OUTLINE:"输入故事概要",Logline_AI:"【故事概要】智能导学",fresh:"刷新并储存",upload:"上传",log_placehoder:"请用两三句话概括你想生成的故事摘要",AI_forlog:"你好，我是帮助你创作故事概要的智能助手.\n                你可以尝试问我以下问题:<br>\n                在写故事概要的时候要注意哪些方面？<br>\n                要如何用两三句话总结你的故事？",AI_input:"在这里输入问题",characters:"编辑角色",cha_add:"添加新角色",cha_AI:"智能导学",C_name:"名字",C_de:"描述",C_voice:"音色",voice:"选择声音",C_p:"图片",C_Genp:"生成角色图片",cancel:"取消",confirm:"确认",delete:"删除",cha_edit:"编辑角色",plots:"编辑情节",GenP:"生成情节",AddP:"添加新情节",EditP:"编辑情节内容",P_name:"情节名称",P_stage:"情节阶段",P_s:"场景",P_c:"出场角色",P_in:"介绍",P_number:"第几幕",scenes:"编辑场景",EditS:"编辑场景内容",Scene_AI:"智能导学",S_name:"场景名字",S_de:"场景描述",S_p:"场景图片",S_Genp:"生成场景图片",dialogues:"逐个情节创作台词",GenD:" 生成角色对话",playwriting:" 剧本",Gen:"查看"},Wa={...$a},Ta={input:"Input Your logline",character:"Character",plot:"Plot",scene:"Scene",dialogue:"Dialogue",output:"Render Your Script",SCRIPT_OUTLINE:"Input your script outline",Logline_AI:"LOGLINE Intelligent Assistant",fresh:"Refresh",upload:"Upload",log_placehoder:"Please write down your playwriting summary with two or three sentences",AI_forlog:"hello, I'm an Intelligent Assistant who can help you with logline writing.\n                You can try asking me like the following questions:<br>\n                What should I pay attention to when writing logline?<br>\n                How can I summarize a specific story in two or three sentences?",AI_input:"Ask your question here",characters:"Craft the Characters",cha_AI:"Assistant",cha_add:"Add New Character",C_name:"Name",C_de:"Description",C_voice:"voice",voice:"please choose voice gender",C_p:"picture",C_Genp:"Generate Picture",cancel:"cancel",confirm:"confirm",delete:"delete",cha_edit:"Edit Character",plots:"Craft the Characters",GenP:"Generate Plots",AddP:"Add New Plot",EditP:"Edit The Plot",P_name:"Name",P_stage:"Plot Stage",P_s:"Scene",P_c:"Characters",P_in:"Introduction",P_number:"Number",scenes:"Craft the Scenes",Scene_AI:"Assistant",S_name:"name",S_de:"Description",S_p:"Picture",S_Genp:"Generate Picture",dialogues:" Create dialogues plot by plot",GenD:" Generate",playwriting:" Playwriting",Gen:" Generate"},Ga={...Ta};const Ka=(0,f.hU)({legacy:!1,globalInjection:!0,locale:localStorage.getItem("lang")||"zh_CN",messages:{zh_CN:Wa,en_US:Ga}});var xa=Ka;const Xa=(0,l.Ef)(d);for(const[Na,Ua]of Object.entries(y))Xa.component(Na,Ua);Xa.use(r.A),Xa.use(Qa),Xa.use(La),Xa.use(xa),Xa.mount("#app"),console.log("Element Plus has been installed!")},5512:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkEAAAJBCAYAAABBBGGtAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFiUAABYlAUlSJPAAAAn4SURBVHhe7dYxAQAgDMCwgX/PwIGLJk8tdJ1nAABi9i8AQIoJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCABIMkEAQJIJAgCSTBAAkGSCAIAkEwQAJJkgACDJBAEASSYIAEgyQQBAkgkCAJJMEACQZIIAgCQTBAAkmSAAIMkEAQBJJggASDJBAECSCQIAkkwQAJBkggCAJBMEACSZIAAgyQQBAEkmCAAImrlsowh+tDRyhwAAAABJRU5ErkJggg=="},2723:function(e,a,t){e.exports=t.p+"img/operalogo.34fc135e.jpg"},2456:function(e,a,t){e.exports=t.p+"img/upload.ff33f32a.png"}},a={};function t(l){var n=a[l];if(void 0!==n)return n.exports;var o=a[l]={exports:{}};return e[l].call(o.exports,o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(a,l,n,o){if(!l){var s=1/0;for(d=0;d<e.length;d++){l=e[d][0],n=e[d][1],o=e[d][2];for(var c=!0,i=0;i<l.length;i++)(!1&o||s>=o)&&Object.keys(t.O).every((function(e){return t.O[e](l[i])}))?l.splice(i--,1):(c=!1,o<s&&(s=o));if(c){e.splice(d--,1);var u=n();void 0!==u&&(a=u)}}return a}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[l,n,o]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var l in a)t.o(a,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:a[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,l){var n,o,s=l[0],c=l[1],i=l[2],u=0;if(s.some((function(a){return 0!==e[a]}))){for(n in c)t.o(c,n)&&(t.m[n]=c[n]);if(i)var d=i(t)}for(a&&a(l);u<s.length;u++)o=s[u],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(d)},l=self["webpackChunkcocoopera"]=self["webpackChunkcocoopera"]||[];l.forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l))}();var l=t.O(void 0,[504],(function(){return t(3758)}));l=t.O(l)})();
//# sourceMappingURL=app.89ca422a.js.map